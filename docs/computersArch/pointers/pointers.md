# 指针(Pointers)

指针的概念是C编程语言的核心特征，它提供了一种**统一**的方式引用不同类型的数据结构。

## 指针的一些原则

* 每个指针都有关联的数据类型

```C
int* p1; // 指针 p1 指向的是一个int类型
int** p2; // 指针 p2 指向的是一个 int* 类型
```

![指针关系图](./images/pointer1.png)

* `void *` 是C语言中的泛型指针，不包含任何类型信息，使用前需要手动类型转换

* 指针通过取地址运算符`&`实现

* 指针通过`*`运算符解引用

* 数组名和指针可以等价替换

```C
// *(arr + 1) 等价于 arr[1]
int arr[5];
int* p;
```

* 强制类型转换指针类型不会改变内存中实际存储的值，只会改变**地址计算的缩放因子**以及**解引用的字节大小**

![指针引用解释](./images/pointer2.png)

* 指针也可以指向函数，函数指针的值是第一条指令的内存地址，在C编程中函数名就是函数的地址

```C
int add(int x, int y);

int (*fp)(int, int); // 函数指针
// int* fp(int, int); 就不是一个函数指针，*会优先和int结合，表示一个函数原型
fp = add;
fp(1, 2);
```